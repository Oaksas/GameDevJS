<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Catch ME </title>
</head>
<style>
    body{
        background-color: black;
    }
     canvas {
        background-image: url("brick.jpg"); 
        background-size: cover;
             display: block;
       margin: 0 auto; }
</style>
<body>

    <canvas id="myCanvas" width="1000" height="650"></canvas>


<script>
    
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");

class game{


    
 ballRadius = 20;
 x = canvas.width/2;
 y = canvas.height-30;
 dx = 2;
 dy = -2;
 speed =10;
 paddleHeight = 100;
 paddleWidth = 20;
 topPressed = false;
 bottomPressed = false;

 highscore =localStorage.getItem('Highscore') ;
 paddleY = 0;
 paddleAIY = 0;




 score = 0;
 level  = 1;
 drawBall = this.drawBall.bind(this);
 draw = this.draw.bind(this);
 keyDownHandler = this.keyDownHandler.bind(this);
 keyUpHandler = this.keyUpHandler.bind(this);
 drawPaddle = this.drawPaddle.bind(this);
 

 


 






 startFun(){
    
    if((localStorage.getItem('Highscore') == null)){
        this.highscore =0;
    }
    
    
    document.addEventListener("keydown", this.keyDownHandler, false);
    document.addEventListener("keyup", this.keyUpHandler, false);

    
    
      
    var interval = setInterval(this.draw,this.speed);
    }


 scoreDisplay(){
ctx.font="30px Comic Sans MS";
ctx.fillStyle = "White";
ctx.textAlign = "center";
ctx.fillText("Score :" +this.score, canvas.width/2, 50);

   }
 levelDisplay(){

ctx.font="30px Comic Sans MS";
ctx.fillStyle = "White";
ctx.textAlign = "center";
ctx.fillText("Level :" + this.level,canvas.width/4, 50 );

   }

highScoreDisplay(){
ctx.font="30px Comic Sans MS";
ctx.fillStyle = "White";
ctx.textAlign = "center";
ctx.fillText("Highscore :" + this.highscore, 850, 50);

   }

 keyDownHandler(e) {
    if(e.key == "Right" || e.key == "ArrowRight") {
        this.topPressed = true;
    }
    else if(e.key == "Left" || e.key == "ArrowLeft") {
        this.bottomPressed = true;
    }
}

 keyUpHandler(e) {
    if(e.key == "Right" || e.key == "ArrowRight") {
        this.topPressed = false;
    }
    else if(e.key == "Left" || e.key == "ArrowLeft") {
        this.bottomPressed = false;
    }
}

 drawBall(){

    ctx.beginPath();
    ctx.arc(this.x, this.y,this.ballRadius , 0, Math.PI*2, false);
    ctx.fillStyle = "black";
    ctx.fill();
    ctx.closePath();

} 
drawPaddle() {
    ctx.beginPath();
    ctx.rect(0, this.paddleY, this.paddleWidth, this.paddleHeight);
    ctx.fillStyle = "white";
    ctx.fill();
    ctx.closePath();
}

 drawAIPaddle(){
    ctx.beginPath();
    ctx.rect(980, this.paddleAIY, this.paddleWidth, this.paddleHeight);
    ctx.fillStyle = "white";
    ctx.fill();
    ctx.closePath();
}
  
  
 draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    this.drawBall();
    this.drawPaddle();
    this.drawAIPaddle();
    this.scoreDisplay();
    this.highScoreDisplay();
    this.levelDisplay();
    this.paddleAIY = this.y+this.dy-50;
    
    if(this.x + this.dx > canvas.width-this.ballRadius || this.x + this.dx < this.ballRadius) {
        this.dx = -this.dx;
    }else if(this.x + this.dx - this.ballRadius === 0) {
        if(this.y > this.paddleY && this.y < this.paddleY + this.paddleHeight) {
        this.dx = -this.dx;
        this.score +=1;
        this.speed -=1;
        if(this.score >=0 && this.score <=3){
            this.level = 1;

        }else if(this.score >=4 && this.score <=10){
            this.level = 2;

        }
        else if(this.score >=11 && this.score <=15){
            this.level =3;

        }
        else if(this.score >=20){
            this.level =4;

        }
        clearInterval(this.interval);
        this.interval = setInterval(this.draw,this.speed);
    }
    else {  
    if(this.score >= this.highscore){
        localStorage.setItem('Highscore',this.score);
    }
        alert("GAME OVER \n YOUR SCORE IS "+ this.score);
        document.location.reload();
        clearInterval(this.interval);

    }
}
    if(this.y + this.dy > canvas.height-this.ballRadius || this.y + this.dy < this.ballRadius) {
        this.dy = -this.dy;
    }

    if(this.topPressed) {
        this.paddleY += 4;
        if (this.paddleY + this.paddleHeight > canvas.height){
            this.paddleY = canvas.height - this.paddleHeight;
        }
    }
    else if(this.bottomPressed) {
        this.paddleY -= 4;
        if (this.paddleY < 0){
            this.paddleY = 0;
        }
    }
    
    this.x += this.dx;
    this.y += this.dy;
} 
    

}

let g = new game();
g.startFun()








</script>

</body>
</html>